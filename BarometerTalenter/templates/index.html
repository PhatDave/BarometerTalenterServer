<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
	<style>
		.talent {
			border: 1px solid red;
		}
		.talentTree {
			border: 1px solid blue;
		}
		.characterTreesContainer {
			border: 1px solid green;
		}
		.characterContainer {
			border: 1px solid black;
		}
		.flex-even {
			flex: 1;
		}
	</style>
</head>
<body>
<div>
	{# <input id="fileInputTextjel" type="text" name="input" placeholder="Deder path"> #}
	<div class="row m-0" id="content">
		<div class="col-6 characterContainer d-flex flex-column justify-content-start px-1">
			<h2 class="characterName text-center">name jel</h2>
			<div class="characterTreesContainer d-flex flex-row justify-content-between">
				<div class="talentTree d-flex flex-column justify-content-start px-1">
					<div class="talentTreeName text-center">
						<h3>talent tree 1</h3>
					</div>
					<div class="talentRowContainer d-flex flex-row justify-content-evenly">
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
					</div>
				</div>
				<div class="talentTree d-flex flex-column justify-content-start px-1">
					<div class="talentTreeName text-center">
						<h3>talent tree 1</h3>
					</div>
					<div class="talentRowContainer d-flex flex-row justify-content-evenly">
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
					</div>
				</div>
				<div class="talentTree d-flex flex-column justify-content-start px-1">
					<div class="talentTreeName text-center">
						<h3>talent tree 1</h3>
					</div>
					<div class="talentRowContainer d-flex flex-row justify-content-evenly">
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
						<div class="talent">
							<span>test 123 jel</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	$(document).ready(function() {
        let talentData = {};

        let inputField = $("#fileInputTextjel");
        inputField.keypress(function(key) {
            if (key.which === 13) {
                submitPath(inputField.val());
            }
		})

		submitPath("D:\\Steam\\steamapps\\common\\Barotrauma");

		{# D:\Steam\steamapps\common\Barotrauma #}
		function submitPath(path) {
			$.ajax({
				url: "{% url 'talenter:getTalents' %}",
				type: "POST",
				data: {
                    csrfmiddlewaretoken: "{{ csrf_token }}",
					"path": path
				},
				success: function(data) {
                    let content = $("#content")
                    inputField.remove();
                    let uiManager = new UIManager(data);
                    uiManager.build(content);
				}
			});
		}

        class UIManager {
            constructor(data) {
                this.data = data;
            }

            build(container) {
                $.each(this.data, (key) => {
                    let character = this.data[key];

                    const characterContainer = this.createCharacterContainer(character);
					const talentTreeContainer = this.createTalentTreeContainer();
					characterContainer.append(talentTreeContainer);

					$.each(character.trees, (treeKey) => {
						let tree = character.trees[treeKey];
						const talentTree = this.createTalentTree(tree);
                        const talentRowContainer = this.createTalentTreeRowContainer();

                         {#add talents to row container jel by row#}

						talentTreeContainer.append(talentTree);
					})

                   container.append(characterContainer);
                });
            }

	        createCharacterContainer(character) {
	            let element = `
	            <div class="col-6 characterContainer d-flex flex-column justify-content-start px-1 py-3">
					<h2 class="characterName text-center">${character.name}</h2>
				</div>
				`;

	            return $(element);
	        }

	        createTalentTreeContainer() {
	            let element = `
					<div class="characterTreesContainer d-flex flex-row justify-content-between">
					</div>`;
	            return $(element);
	        }

	        createTalentTree(ttree) {
	            let element = `
					<div class="talentTree d-flex flex-column justify-content-start px-1 flex-even">
						<div class="talentTreeName text-center">
							<h3>${ttree.name}</h3>
						</div>
					</div>`;
				return $(element);
	        }

            createTalentTreeRowContainer() {
                let element = `<div class="talentRowContainer d-flex flex-row justify-content-evenly">
					</div>`;
				return $(element);
            }
        }
	})
</script>
</body>